<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../static/logo.png">
    <title>215kthLargestinArray</title>
    <script>
        function kthLargestInArray(nums, k) {
            // 目标索引 
            const targetIndex = nums.length - k;
            let left = 0;
            let right = nums.length - 1;

            while(true) {
                const index = partition(nums, left, right);
                if(targetIndex === index) {
                    return nums[index];
                } else if(targetIndex < index) {
                    right = index -1;
                } else {
                    left = index + 1;
                }
            }
        }

        function partition(nums, left, right) {
            // [left + 1 , j ] < pivot , (j, i] >= pivot
            let pivot = nums[left];
            let j = left;
            for(let i = left + 1; i <= right; i++) {
                if(nums[i] < pivot) {
                    j++;
                    swap(nums,i ,j);
                }
            }

            // 满足 [left+1, j] < pivot
            swap(nums, j, left);

            return j;

        }

        const swap = function (nums, n, m) {
            let tmp = nums[n];
            nums[n] = nums[m];
            nums[m] = tmp;
        }

        console.log(kthLargestInArray([10, 1, 2, 0], 2));
        console.log(kthLargestInArray([12, 22, 10, 1, 2], 3));
    </script>
</head>

<body>
    <h3>一个数组中第K大的元素</h3>
    <img src="img/215.png" height="50%" width="60%" />
</body>

</html>